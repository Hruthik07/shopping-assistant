# Core Dependencies
fastapi>=0.109.1,<1.0.0  # Fixed PYSEC-2024-38
starlette>=0.47.2,<1.0.0  # Fixed CVE-2024-47874, CVE-2025-54121 (FastAPI dependency)
uvicorn[standard]==0.27.0
pydantic>=2.6.0,<3.0.0  # Use newer version with pre-built wheels for Python 3.13
pydantic-settings>=2.1.0,<3.0.0
python-dotenv==1.0.0

# LangChain & AI
langchain>=0.3.0,<1.0.0  # Updated to support numpy 2.0+
langchain-openai>=0.2.0,<1.0.0
langchain-anthropic>=0.2.0,<1.0.0  # For Claude 3.5 Haiku support
langchain-community>=0.3.0,<1.0.0
langgraph>=0.2.0,<1.0.0
openai>=1.12.0,<2.0.0
anthropic>=0.34.0,<1.0.0  # Anthropic SDK for Claude
tiktoken>=0.12.0,<1.0.0  # Required by langchain-openai
numpy>=2.0.0,<3.0.0  # Explicitly require numpy 2.0+ for Python 3.13

# Vector Database
chromadb>=0.5.0,<1.0.0  # Updated for Python 3.13 support with pre-built wheels
sentence-transformers>=2.2.2,<3.0.0
transformers>=4.30.0,<5.0.0  # Required by sentence-transformers
torch>=2.0.0,<3.0.0  # Required by sentence-transformers
scikit-learn>=1.3.0,<2.0.0  # Required by sentence-transformers

# Database
sqlalchemy>=2.0.36,<3.0.0  # Updated for Python 3.13 compatibility
alembic==1.13.1
# psycopg2-binary==2.9.9  # Optional - only needed for PostgreSQL

# MCP & Tools
httpx==0.26.0
aiohttp>=3.9.1,<4.0.0  # Use newer version with pre-built wheels for Python 3.13
pillow>=10.0.0,<11.0.0  # Use latest version with pre-built wheels
tavily-python>=0.3.0,<1.0.0  # Allow newer version for tiktoken compatibility
beautifulsoup4==4.12.2  # For web scraping if needed

# API & WebSocket
websockets==12.0
python-multipart>=0.0.22  # Fixed CVE-2024-53981, CVE-2026-24486, PYSEC-2024-38
python-jose[cryptography]>=3.4.0  # Fixed PYSEC-2024-232, PYSEC-2024-233
passlib[bcrypt]==1.7.4

# Utilities
python-dateutil==2.8.2
pytz==2024.1

# Caching
redis>=5.0.0,<6.0.0
hiredis>=2.2.0,<3.0.0  # C extension for faster Redis parsing

# Retry & Resilience
tenacity>=8.2.0,<9.0.0  # Retry library with exponential backoff
circuitbreaker>=2.0.0,<3.0.0  # Circuit breaker pattern implementation

# Testing
pytest==7.4.4
pytest-asyncio==0.23.3
pytest-cov==4.1.0

# Evaluation & Monitoring
deepeval>=2.0.0,<3.0.0
langfuse>=2.57.4,<3.0.0  # Fixed: tighter lower bound to help pip resolve
# pytest-deepeval>=0.1.0  # Removed: not available for Python 3.11+, use deepeval directly

# AWS Integration (for Bedrock deployment)
boto3>=1.34.0,<2.0.0  # AWS SDK for CloudWatch, Cost Explorer, Bedrock
botocore>=1.34.0,<2.0.0  # Core AWS SDK (usually comes with boto3)

# Development
black>=24.3.0,<25.0.0  # Fixed PYSEC-2024-48
flake8==7.0.0
mypy==1.8.0